<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Cardonomics Login</title>
    <link rel="stylesheet" href="stylesheets/ipad.css" />
    <link rel="stylesheet" href="stylesheets/styles.css" />
    <link rel="stylesheet" href="stylesheets/reset.css" />
    <link href='http://fonts.googleapis.com/css?family=Cutive' rel='stylesheet' type='text/css'>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

    <!-- Mobile Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0;" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <!-- <script>
        //function to check if user is already logged on facebook. If yes, say hi
        function facebookCheck(){
            FB.api('/me', function(response) {
                alert('Howdy, ' + response.name);
                //<img src="https://graph.facebook.com/776405701/picture"/>
            });
        }
        //function to handle fblogin
        function fbLogin(){
            FB.login(function(response) {
                if (response.authResponse) {
                    console.log('Welcome!  Fetching your information.... ');
                    FB.api('/me', function(response) {
                        console.log('Good to see you, ' + response.name + '.');
                        var username = response.name;
                        //Get userid from FBLoginStatus object
                        FB.getLoginStatus(function(response) {
                            if (response.status === 'connected') {
                                var uid = response.authResponse.userID;
                                var accessToken = response.authResponse.accessToken;
                                //Relay user info via REST to server
                                authUser(username, uid);
                            }
                        });

                    });

                } else {
                    console.log('User cancelled login or did not fully authorize.');
                }
            });
        }
        //Function for sending user info via REST to server
        function authUser(username, userid){
            //check if user exists
            var userInfo = doesUserExist(userid);
        }

        function successRedirectToLobby(userid){
            window.location.href = "http://cardonomics.appspot.com/app/index.html?id="+userid;
        }

        //Function for checking if user exists in our system
        function doesUserExist(userid){
            $.ajax({
                url: 'http://cardonomics.appspot.com//api/player/'+userid,
                type: 'GET',
                statusCode: {
                    404: function(){
                        createNewUser(userid)
                    }
                },
                success: function(response) {
                    alert('Returned: '+response);
                    successRedirectToLobby(userid);
                }
            });
        }

        //function for creating new user if user does not exist in our system
        function createNewUser(userid){
            $.ajax({
                url: 'http://cardonomics.appspot.com//api/player/'+userid,
                type: 'PUT',
                statusCode: {
                    404: function(){
                        alert("Failed to create new user")
                    }
                },
                success: function(response) {
                    alert('Returned: '+response);
                    successRedirectToLobby(userid);
                }
            });
        }

    </script>  -->

</head>
<body>
    <!-- Facebook Init JS -->

    <!--<script>
        window.fbAsyncInit = function() {
            FB.init({
                appId      : '310020362385862', // App ID
                channelUrl : '//www.cardonomics.appspot.com/app/channel.html', // Channel File
                status     : true, // check login status
                cookie     : true, // enable cookies to allow the server to access the session
                xfbml      : true  // parse XFBML
            });
        };

        // Load the SDK Asynchronously
        (function(d){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        }(document));
    </script> -->


    <!-- logo and button -->
    <div class="ipadWrapper" style="padding-top:10%">
        <div class="loginContainer marginauto">
            <div class="logo"></div>
            <span class="h4" style="margin-left:12px"><strong>Make Learning Economics Fun</strong></span>

            <a href="index.html#/nav/login"><div class="fb-login-btn">Login with Facebook</div></a>
            <div class="infoText">Your info is only used for logging into Cardonomics</div>

        </div>
    </div>



</body>
</html>